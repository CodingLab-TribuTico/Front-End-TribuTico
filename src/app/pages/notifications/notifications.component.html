<div class="w-full bg-crater-brown flex flex-col items-center px-6 py-2 max-w-7xl rounded-md">
    <div class="w-full p-4 border-b border-bisque/30">
        <p class="font-bold text-xl text-bisque">Notificaciones</p>
    </div>
    <div class="grid grid-cols-3 gap-2 py-4 w-full">
        <!-- Panel izquierdo - Lista de notificaciones (ancho fijo) -->
        <div class="col-span-1 border-bisque/30 border rounded-md p-2 h-[43rem] overflow-y-auto w-[350px]">
            @if(allNotifications().length > 0) {
            @for(item of allNotifications().slice().reverse(); track item.id) {
            <div (click)="selectNotification(item)"
                class="flex flex-col items-start py-2 pr-4 hover:bg-zorba transition-colors rounded-md cursor-pointer w-full"
                [class.bg-zorba]="selectedNotification?.id === item.id">
                <div class="flex flex-row items-center px-2 min-w-0 w-full">
                    <span class="material-symbols-rounded text-bisque text-xl px-2">
                        {{
                        item.type === 'Informativa'
                        ? 'info'
                        : item.type === 'Urgente'
                        ? 'warning'
                        : 'notifications'
                        }}
                    </span>
                    <div class="ml-2 min-w-0 w-full">
                        <p class="font-bold text-bisque">{{ item.name }}</p>
                        <p class="text-sm text-bisque truncate whitespace-nowrap overflow-hidden text-ellipsis">
                            {{ item.description }}
                        </p>
                        <span class="text-xs text-bisque/70">
                            {{ item.closeDate | date: 'dd/MM/yyyy' }}
                        </span>
                    </div>
                    @if(!item.isRead) {
                    <span class="relative inline-flex h-2 w-2 mt-1 ml-2">
                        <span
                            class="absolute inline-flex h-full w-full animate-ping rounded-full bg-flamenco opacity-75"></span>
                        <span class="relative inline-flex h-2 w-2 rounded-full bg-flamenco"></span>
                    </span>
                    }
                </div>
            </div>
            }
            } @else {
            <div class="h-full flex items-center justify-center">
                <p class="text-bisque/70 italic">No hay notificaciones</p>
            </div>
            }
        </div>

        <!-- Panel derecho - Detalles de notificación -->
        <div class="col-span-2 w-full border-bisque/30 border rounded-md p-2">
            @if(selectedNotification) {
            <div class="p-4">
                <h2 class="text-2xl font-bold text-bisque mb-4">{{ selectedNotification.name }}</h2>
                <div class="flex items-center gap-2 mb-4">
                    <span class="material-symbols-rounded text-bisque">
                        {{
                        selectedNotification.type === 'Informativa'
                        ? 'info'
                        : selectedNotification.type === 'Urgente'
                        ? 'warning'
                        : 'notifications'
                        }}
                    </span>
                    <span class="text-bisque">{{ selectedNotification.type }}</span>
                    <span class="text-bisque/70 ml-auto">
                        {{ selectedNotification.closeDate | date: 'dd/MM/yyyy' }}
                    </span>
                </div>
                <p class="text-bisque mb-4">{{ selectedNotification.description }}</p>
                @if (!selectedNotification.isRead) {
                <div class="mt-6 pt-4 border-t border-bisque/20">
                    <button (click)="handleMarkAsRead(selectedNotification.id)"
                        class="px-4 py-2 bg-bisque text-crater-brown rounded-md hover:bg-opacity-90 focus:bg-opacity-90 active:bg-opacity-90 golden-glow">
                        Marcar como leída
                    </button>
                </div>
                }
            </div>
            } @else {
            <div class="h-full flex items-center justify-center">
                <p class="text-bisque/70 italic">Selecciona una notificación para ver los detalles</p>
            </div>
            }
        </div>
    </div>
</div>